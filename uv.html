<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Proxy</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
  }
  iframe {
    border: none;
    width: 100%;
    height: 100%;
  }
</style>
</head>
<body>
<iframe id="uvFrame"></iframe>
<script>
const frame = document.getElementById('uvFrame');
const path = location.pathname.replace(/^\/uv\/?/, '');
let targetUrl;

if (path) {
  try {
    targetUrl = decodeURIComponent(path);
    if (!targetUrl.startsWith('http')) targetUrl = 'https://' + targetUrl;
  } catch {
    targetUrl = 'https://duckduckgo.com';
  }
} else {
  const q = new URLSearchParams(location.search).get('q');
  if (q) {
    targetUrl = 'https://html.duckduckgo.com/html/?q=' + encodeURIComponent(q);
  } else {
    targetUrl = 'https://duckduckgo.com';
  }
}

frame.src = 'https://fgfd-psi.vercel.app/uv/service/' + encodeURIComponent(targetUrl);
</script>
<script src="frame.js"></script>
<script src="script.js"></script>
</body>
</html>
